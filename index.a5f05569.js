function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r,n,o,a,c=document.querySelectorAll(".message"),i=document.querySelector(".message-lose"),s=document.querySelector(".message-win"),l=document.querySelector(".button"),u=document.querySelectorAll(".field-cell"),f=document.querySelector(".game-field"),d=document.querySelector(".game-score"),h=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];function m(){for(var t,e=Math.floor(4*Math.random()),r=Math.floor(4*Math.random());0!==h[e][r];)e=Math.floor(4*Math.random()),r=Math.floor(4*Math.random());h[e][r]=(t=2,0===Math.floor(10*Math.random())&&(t=4),t)}function v(){for(var t=0;t<h.length;t++)for(var e=f.rows[t],r=0;r<h[t].length;r++){var n=e.cells[r];n.className="field-cell",n.textContent="",0!==h[t][r]&&(n.classList.add("field-cell--".concat(h[t][r])),n.textContent=h[t][r])}}function y(t){return t.filter(function(t){return 0!==t})}function g(t){for(var e=y(t),r=0;r<e.length-1;r++)e[r]===e[r+1]&&(e[r]*=2,e[r+1]=0,d.textContent=+d.textContent+ +e[r]);for(e=y(e);e.length<h.length;)e.push(0);return e}function b(t){for(var e=0;e<h.length;e++){var r=h[e];t&&r.reverse(),r=g(r),t&&r.reverse(),h[e]=r}}function p(t){for(var e=0;e<h.length;e++){var r=[h[0][e],h[1][e],h[2][e],h[3][e]];t&&r.reverse(),r=g(r),t&&r.reverse(),h[0][e]=r[0],h[1][e]=r[1],h[2][e]=r[2],h[3][e]=r[3]}}function L(t){document.dispatchEvent(new window.KeyboardEvent("keyup",{code:t}))}l.addEventListener("click",function(){l.classList.contains("restart")||(l.classList.remove("start"),l.classList.add("restart"),l.textContent="Restart");for(var t=0;t<h.length;t++)for(var r=0;r<h[t].length;r++)h[t][r]=0;e(c).map(function(t){return t.classList.add("hidden")}),d.textContent=0,e(u).map(function(t){t.className="field-cell",t.textContent=""}),m(),m(),v(),l.blur()}),document.addEventListener("keyup",function(t){if(l.classList.contains("restart")&&i.classList.contains("hidden")&&s.classList.contains("hidden")){var r=JSON.parse(JSON.stringify(h));switch(t.code){case"ArrowLeft":b();break;case"ArrowRight":b(!0);break;case"ArrowUp":p();break;case"ArrowDown":p(!0);break;default:return}if(JSON.stringify(r)!==JSON.stringify(h)){m(),v(),e(u).some(function(t){return t.classList.contains("field-cell--2048")})&&s.classList.remove("hidden");for(var n=!0,o=!0,a=0;a<h.length;a++)for(var c=0;c<h.length-1;c++)if(h[a][c]===h[a][c+1]){n=!1;return}for(var f=0;f<h.length;f++)for(var d=[h[0][f],h[1][f],h[2][f],h[3][f]],y=0;y<d.length-1;y++)if(d[y]===d[y+1]){o=!1;return}h.every(function(t){return t.every(function(t){return 0!==t})})&&!0===o&&!0===n&&i.classList.remove("hidden")}}}),document.addEventListener("touchstart",function(t){r=t.touches[0].clientX,n=t.touches[0].clientY}),document.addEventListener("touchmove",function(t){o=t.touches[0].clientX-r,a=t.touches[0].clientY-n}),document.addEventListener("touchend",function(t){Math.abs(o)>Math.abs(a)?o<0?L("ArrowLeft"):L("ArrowRight"):a<0?L("ArrowUp"):L("ArrowDown")});
//# sourceMappingURL=index.a5f05569.js.map
